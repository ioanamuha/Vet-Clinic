USE `finalproject`;

DROP TABLE IF EXISTS `medicalcondition_trial`;
DROP TABLE IF EXISTS `appointment_trial`;
DROP TABLE IF EXISTS `docdet_trial`;
DROP TABLE IF EXISTS `role_trial`;
DROP TABLE IF EXISTS `pet_trial`;
DROP TABLE IF EXISTS `user_trial`;

CREATE TABLE user_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  first_name VARCHAR(50) NOT NULL,
  last_name VARCHAR(50) NOT NULL,
  email VARCHAR(50) NOT NULL,
  password VARCHAR(50) NOT NULL,
  enabled TINYINT NOT NULL,
  PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- Table structure for table role_trial
CREATE TABLE role_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  role VARCHAR(50) NOT NULL,
  user_id BIGINT NOT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY role_idx_1 (user_id, role),
  CONSTRAINT role_ibfk_1 FOREIGN KEY (user_id) REFERENCES user_trial (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- DocDet table
CREATE TABLE docdet_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  specializare VARCHAR(256) DEFAULT NULL,
  user_id BIGINT NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (user_id) REFERENCES user_trial (id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

-- Pet table
CREATE TABLE pet_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  name VARCHAR(45) DEFAULT NULL,
  category VARCHAR(45) DEFAULT NULL,
  age INT DEFAULT NULL,
  weight DECIMAL(5, 2) DEFAULT NULL,
  owner_id BIGINT NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (owner_id) REFERENCES user_trial (id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

-- Appointment table
CREATE TABLE appointment_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  `interval` INT NOT NULL,
  day DATE DEFAULT NULL,
  doctor_id BIGINT NOT NULL,
  pet_id BIGINT NOT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (doctor_id) REFERENCES user_trial (id),
  FOREIGN KEY (pet_id) REFERENCES pet_trial (id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

-- MedicalCondition table
CREATE TABLE medicalcondition_trial (
  id BIGINT NOT NULL AUTO_INCREMENT,
  medical_condition VARCHAR(256) DEFAULT NULL,
  medical_prescription VARCHAR(256) DEFAULT NULL,
  appointment_id BIGINT DEFAULT NULL,
  PRIMARY KEY (id),
  FOREIGN KEY (appointment_id) REFERENCES appointment_trial(id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


-- Insert data into user table
INSERT INTO user_trial (first_name, last_name, email, password, enabled) VALUES
('John', 'Cooper', 'john@mail.com', '{noop}test123', 1),
('Tudor', 'Filip', 'tudor@mail.com', '{noop}test123', 1),
('Corina', 'Samson', 'corina@mail.com', '{noop}test123', 1),
('Mara', 'Elena', 'mara@mail.com', '{noop}test123', 1),
('Mary', 'Mooper', 'mary@mail.com', '{noop}test123', 1),
('Susan', 'Fooper', 'susan@mail.com', '{noop}test123', 1);

-- Insert data into role table
INSERT INTO role_trial (user_id, role) VALUES
(1, 'ROLE_PETOWNER'),
(2, 'ROLE_PETOWNER'),
(3, 'ROLE_DOCTOR'),
(4, 'ROLE_DOCTOR'),
(5, 'ROLE_DOCTOR'),
(6, 'ROLE_ADMIN');

-- Insert data into doctor details table
INSERT INTO docdet_trial (user_id, specializare) VALUES
(1, ''),
(2, ''),
(3, 'Sports Medicine and Rehabilitation'),
(4, 'Dermatology'),
(5, 'Surgery'),
(6, '');

-- Insert data into pet table
INSERT INTO pet_trial (name, category, age, weight, owner_id) VALUES
('Buddy', 'Dog', 5, 20.5, 1),
('Mittens', 'Cat', 3, 4.2, 1),
('Goldie', 'Fish', 1, 0.1, 1),
('Bella', 'Dog', 4, 18.0, 2),
('Whiskers', 'Cat', 2, 3.5, 2);

-- Insert data into appointment table
INSERT INTO appointment_trial (`interval`, day, doctor_id, pet_id) VALUES
(1, '2024-08-01', 3, 1),
(2, '2024-08-02', 3, 1),
(3, '2024-08-03', 4, 2),
(2, '2024-08-03', 5, 2),
(1, '2024-08-03', 4, 2),
(2, '2024-08-01', 3, 1);

-- Insert data into medical condition table
INSERT INTO medicalcondition_trial (medical_condition, medical_prescription, appointment_id) VALUES
('Arthritis', 'Glucosamine supplements', 1),
('Obesity', 'Diet control', 2),
('Diabetes', 'Insulin injections', 3),
('Fin Rot', 'Antibiotics', 4),
('Hip Dysplasia', 'Surgery', 5),
('Flea Allergy', 'Anti-flea treatment', 6);
